<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Olaki - List of Android devices by compatible operating systems</title>
  <meta name="description" content="A table that lists Android devices by compatible operating systems.">
  <meta name="author" content="olaki-android">

  <meta property="og:title" content="Olaki - List of Android devices by compatible operating systems">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://olaki-android.github.io/olaki">
  <meta property="og:description" content="A table that lists Android devices by compatible operating systems.">
  <style>
    :root {
      --body-backrgound-color: #ffff;
      --table-border: 1px solid black;
      --table-odd-row-backrgound-color: #d9b1ea;
      --table-even-row-backrgound-color: #e5e3e3;
      --appendix-code-backrgound-color: #d0d0d0;
    }

    html, body {
      font-family: sans-serif;
      font-size: 1em;
      color: #0c0c0c;
      background-color: var(--body-backrgound-color);
      padding: 0 7px;
    }

    #table-container {
      width: 1100px;
    }

    table {
      font-size: 0.95rem;
      border-top: var(--table-border);
      border-left: var(--table-border);
      border-spacing: 0;
      width: 100%;
    }

    /* attempt to target mobile devices */
    @media (hover: none), (hover: on-demand) {
      #table-container {
        overflow: auto;
        height: 450px;
      }
    }

    th, td {
      padding: 10px 0;
      border-bottom: var(--table-border);
      border-right: var(--table-border);
      word-wrap: break-word;
      text-align: center;
    }

    th {
      /* safari */
      position: -webkit-sticky;
      position: sticky;
      top: 0;
      background-color: var(--table-even-row-backrgound-color);
      z-index: 10;
    }

    /* device name column */
    tr th:first-child, tr td:first-child {
      width: 160px;
      padding: 10px;
    }

    /* codename name column */
    tr th:nth-child(2), tr td:nth-child(2) {
      width: 103px;
    }

    tbody tr:nth-child(odd) {
      background-color: var(--table-odd-row-backrgound-color);
    }

    tbody tr:nth-child(even) {
      background-color: var(--table-even-row-backrgound-color);
    }

    footer .code {
      background-color: var(--appendix-code-backrgound-color);
      width: 355px;
      padding: 5px 10px;
      line-height: 1.5rem;
    }
  </style>
</head>

<body>
<header>
  <h1>Welcome to Olaki.</h1>
  <p>
    An automatically generated list of Android devices by compatible operating systems, with links to download or
    project pages.
  </p>
  <p>
    Sensible defaults are defined to try and only include <code>(device, OS)</code> combinations with high compatibility rates. See
    the <a href="#appendix">Appendix</a> for more details.
  </p>
  <p>Last update: <span id="last-update-date"></span>. Updated at least once a month.</p>
  <p>Please <a href="https://github.com/olaki-android/olaki" target="_blank">contribute</a> if you'd like to see other operating
    systems listed here.
  </p>
</header>
<main>
  <h2>Table</h2>
  <p id="quick-table-stats"></p>
  <div id="table-container">
    <table id="olaki-table">
      <thead>
      <tr>
        <th>Device name</th>
        <th>Codename</th>
        <th class="os-column-header">crDroid</th>
        <th class="os-column-header">/e/OS</th>
        <th class="os-column-header">Kali<br>Linux</th>
        <th class="os-column-header">LineageOS</th>
        <th class="os-column-header">OmniROM</th>
        <th class="os-column-header">postmarket<br>OS</th>
        <th class="os-column-header">Resurrection<br>Remix OS</th>
        <th class="os-column-header">Ubuntu<br>Touch</th>
      </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>
  <footer>
    <h2 id="appendix">Appendix - Parameters used to build this table</h2>
    <h3>crDroid</h3>
    <div class="code" id="crdroid-parameters">
      N/A
    </div>
    <h3>/e/OS</h3>
    <div class="code" id="eos-parameters"></div>
    <h3>Kali Linux</h3>
    <div class="code" id="kali-parameters"></div>
    <h3>LineageOS</h3>
    <div class="code" id="lineageos-parameters"></div>
    <h3>OmniROM</h3>
    <div class="code" id="omnirom-parameters"></div>
    <h3>postmarketOS</h3>
    <div class="code" id="pmos-parameters"></div>
    <h3>Resurrection Remix OS</h3>
    <div class="code" id="resurrectionremix-parameters"></div>
    <h3>Ubuntu Touch</h3>
    <div class="code" id="ubuntutouch-parameters"></div>
  </footer>
</main>

<script src="olaki-data.js"></script>
<script>
  //
  // populate last updated timestamp
  //
  document.getElementById("last-update-date").innerText = new Date(olakiData.lastUpdated).toUTCString();

  //
  // populate table
  //
  let numberOfDeviceToOsCombinations = 0;
  const populateOsCell = (osCell, url, urlText) => {
    numberOfDeviceToOsCombinations++; // mutating a variable outside this function. Sorry :p
    const link = getOsDownloadATag(url, urlText);
    osCell.append(link);
  };
  const tbody = document.getElementById("olaki-table").getElementsByTagName("tbody")[0];

  const getOsDownloadATag = (url, text) => {
    const link = document.createElement("a");
    link.href = url;
    link.target = "_blank";
    link.innerText = text;
    return link;
  };

  for (const deviceSummary of olakiData.deviceSummaries) {
    const row = tbody.insertRow();
    row.insertCell().append(deviceSummary.vendor + " " + deviceSummary.name);
    row.insertCell().append(deviceSummary.codename);

    let nextOsCell = row.insertCell();
    if (deviceSummary.crdroid) {
      populateOsCell(nextOsCell, deviceSummary.crdroid.url, "yes");
    }

    nextOsCell = row.insertCell();
    if (deviceSummary.eos) {
      populateOsCell(nextOsCell, deviceSummary.eos.url, deviceSummary.eos.maturity);
    }

    nextOsCell = row.insertCell();
    if (deviceSummary.kali) {
      populateOsCell(nextOsCell, deviceSummary.kali.url, deviceSummary.kali.isStable ? "stable" : "latest");
    }

    nextOsCell = row.insertCell();
    if (deviceSummary.lineageos) {
      populateOsCell(nextOsCell, deviceSummary.lineageos.url, deviceSummary.lineageos.isMaintained ? "maintained" : "unmaintained");
    }

    nextOsCell = row.insertCell();
    if (deviceSummary.omnirom) {
      populateOsCell(nextOsCell, deviceSummary.omnirom.url, deviceSummary.omnirom.isOfficial ? "official" : "unofficial");
    }

    nextOsCell = row.insertCell();
    if (deviceSummary.pmos) {
      populateOsCell(nextOsCell, deviceSummary.pmos.url, deviceSummary.pmos.category);
    }

    nextOsCell = row.insertCell();
    if (deviceSummary.resurrectionremix) {
      populateOsCell(nextOsCell, deviceSummary.resurrectionremix.url, deviceSummary.resurrectionremix.isMaintained ? "maintained" : "unmaintained");
    }

    nextOsCell = row.insertCell();
    if (deviceSummary.ubuntutouch) {
      populateOsCell(nextOsCell, deviceSummary.ubuntutouch.url, deviceSummary.ubuntutouch.progress + "%");
    }
  }

  //
  // populate table stats
  //
  document.getElementById("quick-table-stats").innerHTML =
    `Quick stats: ${Object.keys(olakiData.deviceSummaries).length} devices. ${document.getElementsByClassName("os-column-header").length} operating systems. ${numberOfDeviceToOsCombinations} <code>(device, OS)</code> combinations available.`;


  //
  // populate appendix
  //
  const populateAppendixSectionForOS = (os) => document.getElementById(`${os}-parameters`).innerText = JSON.stringify(olakiData.appConfig[os], null, " ");

  populateAppendixSectionForOS("eos");
  populateAppendixSectionForOS("kali");
  populateAppendixSectionForOS("lineageos");
  populateAppendixSectionForOS("omnirom");
  populateAppendixSectionForOS("pmos");
  populateAppendixSectionForOS("resurrectionremix");
  populateAppendixSectionForOS("ubuntutouch");

</script>
</body>
</html>
